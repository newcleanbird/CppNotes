# =defaule

自C++11起，default在类的特殊成员函数声明后紧跟=, 如= default，用于告诉编译器按照默认行为生成该函数的定义。这对于那些用户没有提供具体实现，但又希望保持其默认行为的成员函数特别有用。这四个主要的特殊成员函数分别是：

- 默认构造函数
- 拷贝构造函数
- 拷贝赋值运算符（operator=）
- 析构函数

使用= default的好处在于，它允许程序员显式请求默认实现，同时保持代码的清晰度，并允许未来的修改。如果程序员重载了某个特殊成员函数，编译器通常不会自动生成默认版本，这时使用= default就能恢复默认行为。

## 基本概念

当在类的特殊成员函数声明后加上=default，你实际上是告诉编译器：“尽管我在这里声明了这个函数，但我并不打算提供具体的实现细节，请你自动为我生成。”这样做有几个目的：

1. 明确性：它使得代码的意图更加清晰。阅读代码的人一眼就能看出这个函数是故意使用默认行为的，而不是因为程序员忘记了实现。
2. 控制性：即使类的成员或基类发生了变化（可能会影响到默认行为），=default的成员函数仍然会被重新生成，确保行为正确无误。
3. 可维护性：如果未来需要对这些默认行为进行自定义实现，只需移除=default并提供具体的实现即可，无需修改调用这些函数的地方。
4. 性能：编译器生成的默认实现往往能优化得更好，尤其是在涉及资源管理的场景下，如RAII（Resource Acquisition Is Initialization）对象的复制控制。

## 应用场景

- 默认构造函数：=default 可以用于显式请求一个无参数的构造函数，即使类中有其他构造函数。

```cpp
class MyClass {
public:
    MyClass() = default; // 显示声明默认构造函数
    // ...
};
```

- 拷贝控制成员：包括拷贝构造函数、拷贝赋值运算符、移动构造函数、移动赋值运算符。当类中包含指针或资源管理时，合理使用=default或=delete可以遵循资源管理的五法则（RAII）。

```cpp
class MyClass {
    std::string data;
public:
    MyClass(const MyClass&) = default; // 拷贝构造函数
    MyClass& operator=(const MyClass&) = default; // 拷贝赋值运算符
    // ...
};
```

- 析构函数：=default也可以用于析构函数，确保即使类的成员发生变化，也能正确清理资源。

```cpp
class MyClass {
    std::unique_ptr<int> ptr;
public:
    ~MyClass() = default; // 显示声明默认析构函数
    // ...
};
```

## 注意事项

- 如果类中有自定义的构造函数、拷贝构造函数等，编译器通常不会自动生成默认版本，此时需要显式=default来请求。

- 在某些情况下，如果类的设计导致默认行为不适用（例如含有不可拷贝的成员变量），则应该=delete这些操作，以避免编译错误或运行时错误。

- =default必须直接跟在声明后面，不能在类外单独使用（除非它是内联定义的一部分）。
