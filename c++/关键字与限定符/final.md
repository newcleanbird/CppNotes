# final

在C++中，final关键字是一个用于限制继承和覆盖的修饰符，它体现了设计者对类结构的意图，增加了代码的健壮性和可读性。final主要有以下两种用法：

## 1. 类的最终声明（Final Classes）

当一个类被声明为``final``时，它不能被其他类继承。这表明该类的设计已经完整，不需要也不应该有子类对其进行修改或扩展。这对于确保类的行为不会被意外改变非常有用，特别是在实现一些核心功能或库类时。

语法:

```cpp
class FinalClass final {
    // 类定义...
};
```

## 2. 方法的最终实现（Final Methods）

当类中的某个成员函数被标记为final时，该方法在其所有派生类中都不能被重写（override）。这意味着该方法提供了最终的实现版本，任何试图覆盖它的尝试都会导致编译错误。这对于强制执行基类中方法的行为至关重要，确保某些关键逻辑或算法不被子类修改。

语法:

```cpp
class BaseClass {
public:
    virtual void someMethod() final {
        // 最终实现...
    }
};

class DerivedClass : public BaseClass {
    // 编译错误：试图覆盖final方法
    void someMethod() override {
        // ...
    }
};
```

## 为什么使用final？

- 设计约束：通过明确指出某些类或方法不应该被继承或覆盖，final帮助设计者传达其对软件架构的意图，增强代码的可读性和可维护性。

- 性能优化：编译器在处理final方法时，可以做出一些优化假设，因为它们知道这些方法不会在运行时被其他方法覆盖，这有时可以带来性能上的微小提升。

- 确保稳定性：在库开发或框架设计中，使用final可以保护核心组件不受用户代码的意外修改，从而保证系统的稳定性和安全性。

## 注意事项

- 使用final关键字是一种设计决策，应当谨慎考虑。过度使用可能会限制代码的灵活性和未来的扩展能力。

- final不能用于非虚函数，因为非虚函数默认就是不可覆盖的。

- C++11标准开始引入了final关键字，确保你的编译器支持这一特性。
